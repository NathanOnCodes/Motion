{% extends "base.html" %} {% block title %}Atualizações{% endblock %} {% block
content %}
<div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
  <h2 class="text-3xl font-bold mb-8">Últimas Atualizações</h2>
  <div class="grid grid-cols-1 gap-4">
    {% for post in posts %}
    <div
      class="bg-gray-700 shadow-md rounded-lg overflow-hidden"
      id="post-{{ post._id }}"
    >
      <div class="px-4 py-2">
        <div class="font-bold text-xl mb-2 text-white">
          {{ post.line.number }} - {{ post.line.description }}
        </div>
        <p class="text-gray-400 text-base">{{ post.content }}</p>
        <div class="mt-4 flex justify-between items-center">
          <div class="flex items-center">
            <img
              src="https://i.pravatar.cc/50?u={{ post._id }}"
              class="h-6 w-6 rounded-full mr-2"
              alt="{{ post.passenger.name }}"
            />
            <span class="text-gray-400">{{ post.created_at }}</span>
          </div>
          <div class="flex items-center">
            <button
              class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full"
              onclick="addLike('like-{{ post._id }}')"
            >
              <span class="mr-2">&#x1F44D;</span>
              <span class="like-count text-white-500">{{ post.likes }}</span>
            </button>
            <button
              class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full ml-4"
            >
              Deixar de seguir
            </button>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %} {% block script %}
<script>
  // Initialize an empty object to store the like counts for each post
  const likeCounts = {};

  function addLike(postId) {
    // Check if the like count for this post already exists in the likeCounts object
    if (!likeCounts[postId]) {
      // If not, initialize it to zero
      likeCounts[postId] = 0;
    }

    // Increment the like count for this post
    likeCounts[postId]++;

    // Update the like count display for this post
    const likeCountElement = document.querySelector(
      `#like-${postId} .like-count`
    );
    likeCountElement.textContent = likeCounts[postId];
  }
</script>
{% endblock %}
